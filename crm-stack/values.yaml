# Global values shared across all subcharts
global:
  namespace: default
  environment: production

  # Common labels applied to all resources
  labels:
    project: crm
    managed-by: helm

  # MongoDB connection details
  mongodb:
    host: mongodb
    port: 27017
    database: crm_db

# CRM Application configuration
crm-app:
  enabled: true
  replicaCount: 2

  image:
    repository: 253490775265.dkr.ecr.us-east-1.amazonaws.com/crm-app
    tag: latest
    pullPolicy: Always

  service:
    type: LoadBalancer
    port: 80
    targetPort: 5000

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

  healthCheck:
    enabled: true
    path: /health
    livenessProbe:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
    readinessProbe:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3

# MongoDB configuration
mongodb:
  enabled: true
  replicaCount: 1

  image:
    repository: mongo
    tag: "7.0"
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 27017
    headless: true

  persistence:
    enabled: true
    size: 5Gi
    accessMode: ReadWriteOnce

  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  healthCheck:
    enabled: true
    livenessProbe:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
